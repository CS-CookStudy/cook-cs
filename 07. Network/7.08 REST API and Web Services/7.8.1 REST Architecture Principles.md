# 7.8.1 REST 아키텍처 원칙

## 1. REST 정의
**REST(Representational State Transfer)**는 분산 시스템 설계를 위한 아키텍처 스타일이다.  
HTTP 프로토콜을 기반으로 **리소스를 자원 단위로 식별**하고, **표현(Representation)**을 통해 상태를 주고받는 방식이다.

### REST vs RESTful
- **REST**: 아키텍처 스타일 (이론적 원칙)
- **RESTful**: REST 원칙을 충실히 따르는 실제 API 구현

---

## 2. REST의 6가지 아키텍처 제약 조건
RESTful API가 되려면 다음 제약 조건들을 충족해야 한다.

### 1) 클라이언트-서버 구조 (Client-Server)
- UI(클라이언트)와 데이터 처리(서버) 역할을 분리하여 확장성과 독립성 확보
- 각각 독립적으로 발전 가능  
**장점:** 유지보수·확장성 우수  
**단점:** 네트워크 의존성 증가

### 2) 무상태성 (Stateless)
- 각 요청은 독립적으로 처리되며, 서버는 클라이언트 상태를 저장하지 않음
- 요청에 필요한 모든 정보를 포함해야 함  
**예시**
```text
잘못된 예: 서버가 "사용자 로그인 상태" 기억
올바른 예: 매 요청마다 인증 토큰을 헤더에 포함
```

**장점:** 서버 확장 용이, 장애 분산 쉬움
**단점:** 요청 크기 증가, 인증 처리 비용 늘어남

### 3) 캐시 처리 가능 (Cacheable)

* 응답은 캐시 가능해야 하며, 이를 통해 성능 향상과 네트워크 부하 감소 가능
* HTTP 캐시 헤더 활용 (Cache-Control, ETag 등)
  **장점:** 속도·성능 향상
  **단점:** 캐시 불일치 시 데이터 무결성 문제

### 4) 계층화 시스템 (Layered System)

* 클라이언트는 최종 서버인지, 중간 프록시/게이트웨이인지 알 필요 없음
* 보안, 로드 밸런싱, 캐싱 기능을 계층적으로 추가 가능
  **장점:** 보안·확장성 강화
  **단점:** 요청 지연 가능성 증가

### 5) 일관된 인터페이스 (Uniform Interface)

* 리소스를 URI로 식별, HTTP 표준 메서드 활용
* 일관성 있는 API 제공으로 학습과 사용성 향상

**HTTP 메서드 매핑**

* GET: 조회 (Read) → **Safe, Idempotent**
* POST: 생성 (Create) → **Non-idempotent**
* PUT: 전체 수정 (Update) → **Idempotent**
* PATCH: 부분 수정 → **Idempotent 보장 X**
* DELETE: 삭제 (Delete) → **Idempotent**

### 6) Code on Demand (선택적)

* 필요 시 서버가 실행 가능한 코드를 클라이언트에 전송하여 동작 확장 가능
* 예시: JavaScript, Java Applet
* 실무에서는 거의 사용되지 않음

---

## 3. RESTful 특성

### 핵심 특성

* **리소스 기반 설계**: 모든 것은 고유한 URI로 표현
* **표현 전송**: 리소스의 상태는 JSON, XML, HTML 등 다양한 형식으로 전달
* **HTTP 표준 활용**: GET, POST, PUT, DELETE 등으로 CRUD 구현
* **Self-descriptive Message**: 요청과 응답만 보고도 의미를 이해할 수 있음

### 장점

* **확장성**: 무상태성으로 인한 서버 확장 용이
* **단순성**: HTTP 표준을 그대로 활용
* **가시성**: URI만 봐도 어떤 리소스인지 파악 가능
* **신뢰성**: HTTP의 안정성과 성숙도 활용

### 한계점

* Over-fetching (불필요한 데이터 포함)
* Under-fetching (필요 데이터 부족, 여러 요청 필요)
* 실시간 스트리밍, 복잡 쿼리에는 한계 → **GraphQL, gRPC** 대체 기술 등장

---

## 4. REST vs SOAP

* **SOAP**: XML 기반, 무겁고 복잡, 강한 형식성 → 금융/보안 시스템에 적합
* **REST**: 경량, JSON 친화적, HTTP 그대로 활용 → 웹/모바일 서비스 표준
* REST가 단순성과 유연성 덕분에 사실상 **웹 API의 표준**이 됨

---

## 5. REST의 핵심 원칙

**3대 원칙**

1. **무상태성 (Stateless)**: 서버는 클라이언트 상태를 저장하지 않음
2. **리소스 기반**: 모든 것은 URI로 식별
3. **HTTP 메서드 활용**: GET, POST, PUT, DELETE로 CRUD 구현

---

## 6. 핵심 요약

* **REST**는 HTTP 기반의 분산 시스템 아키텍처 스타일
* **6가지 제약조건**을 충족해야 RESTful이라 할 수 있음
* **무상태성, 일관된 인터페이스, 리소스 기반 설계**가 핵심
* SOAP 대비 단순하고 유연하여 **현대 웹 API의 사실상 표준**
* 한계(Over/Under-fetching) 보완을 위해 GraphQL, gRPC 등이 함께 활용됨
