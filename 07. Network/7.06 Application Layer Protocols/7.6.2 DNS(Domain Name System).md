# 7.6.2 DNS (Domain Name System)

## 1. DNS κ°μ”

### μ •μ
DNSλ” μ‚¬λμ΄ μ΄ν•΄ν•κΈ° μ‰¬μ΄ **λ„λ©”μΈ μ΄λ¦„(www.example.com)** μ„  
λ„¤νΈμ›ν¬κ°€ μ‚¬μ©ν•λ” **IP μ£Όμ†(203.0.113.1)** λ΅ λ³€ν™ν•΄μ£Όλ” λ¶„μ‚°ν• λ°μ΄ν„°λ² μ΄μ¤ μ‹μ¤ν…μ΄λ‹¤.

π‘‰ **μΈν„°λ„·μ μ „ν™”λ²νΈλ¶€ μ—­ν• **

### μ£Όμ” νΉμ§•
- **λ¶„μ‚°ν• κµ¬μ΅°**: μ „ μ„Έκ³„μ— λ¶„μ‚°λ λ„¤μ„μ„λ²„λ“¤μ΄ ν‘λ ¥
- **κ³„μΈµμ  κµ¬μ΅°**: Root β†’ TLD β†’ Authoritative DNS μμ„
- **μΊμ‹± μ§€μ›**: TTL κΈ°λ°μΌλ΅ μ„±λ¥ μµμ ν™”
- **κΈ°λ³Έ ν¬νΈ**: UDP 53λ² (λ€μ©λ‰ μ‘λ‹µ μ‹ TCP 53λ²)

---

## 2. DNS λ™μ‘ μ›λ¦¬

### κΈ°λ³Έ νλ¦„
1. μ‚¬μ©μκ°€ λΈλΌμ°μ €μ— `www.example.com` μ…λ ¥
2. **λΈλΌμ°μ € μΊμ‹** ν™•μΈ (μ΄μ „μ— μ ‘μ† κΈ°λ΅μ΄ μλ” κ²½μ°)
3. **OS μΊμ‹ (hosts νμΌ, λ΅μ»¬ DNS μΊμ‹)** ν™•μΈ
4. **λ΅μ»¬ DNS λ¦¬μ΅Έλ²„(Resolver)**μ— μ§μ
5. μμ°¨μ μΌλ΅ λ„¤μ„μ„λ²„ νƒμƒ‰
    - Root DNS μ„λ²„ β†’ TLD μ„λ²„(.com, .net λ“±) β†’ Authoritative μ„λ²„(ν•΄λ‹Ή λ„λ©”μΈ λ‹΄λ‹Ή)
6. μµμΆ… IP μ£Όμ† λ°ν™ ν›„, λΈλΌμ°μ €κ°€ ν•΄λ‹Ή IPλ΅ μ—°κ²°

### μƒμ„Έ ν•΄μ„ κ³Όμ • μμ‹
```
μ‚¬μ©μ: www.example.com μ ‘μ†

1. λ΅μ»¬ DNS β†’ Root μ„λ²„: "www.example.comμ IPλ”?"
   Root: ".comμ„ λ‹΄λ‹Ήν•λ” TLD μ„λ²„λ” xxx.xxx.xxx.xxx"

2. λ΅μ»¬ DNS β†’ .com TLD μ„λ²„: "www.example.comμ IPλ”?"
   TLD: "example.comμ„ λ‹΄λ‹Ήν•λ” μ„λ²„λ” yyy.yyy.yyy.yyy"

3. λ΅μ»¬ DNS β†’ example.com Authoritative: "www.example.comμ IPλ”?"
   Authoritative: "93.184.216.34"

4. λ΅μ»¬ DNS β†’ λΈλΌμ°μ €: "93.184.216.34"
```

---

## 3. DNS κ³„μΈµ κµ¬μ΅°

```
Root (.)
 β”β”€β”€ TLD(.com, .org, .net, .kr, .jp ...)
 β”‚    β””β”€β”€ Second-level Domain (example.com, google.com)
 β”‚          β””β”€β”€ Subdomain (www.example.com, mail.example.com)
```

### κ° κ³„μΈµμ μ—­ν• 

#### 1) Root μ„λ²„
- **μ „ μ„Έκ³„ 13κ° λ£¨νΈ μ„λ²„ ν΄λ¬μ¤ν„°** (A~M)
- μµμƒμ„ λ„λ©”μΈ(TLD) μ •λ³΄ κ΄€λ¦¬
- λ¨λ“  DNS μ§μμ μ¶λ°μ 

#### 2) TLD (Top-Level Domain) μ„λ²„
- **μΌλ° TLD**: .com, .org, .net, .info λ“±
- **κµ­κ°€ TLD**: .kr(ν•κµ­), .jp(μΌλ³Έ), .us(λ―Έκµ­) λ“±
- **μ‹ κ· TLD**: .shop, .blog, .tech λ“±

#### 3) Authoritative DNS μ„λ²„ (= Second-level Domain μ„λ²„)
- example.com, google.com λ“±μ μ‹¤μ  λ„λ©”μΈμ„ κ΄€λ¦¬ν•λ” μ„λ²„
- νΉμ • λ„λ©”μΈμ **μµμΆ… κ¶ν•**μ„ κ°€μ§„ μ„λ²„
- A, AAAA, CNAME λ“± μ‹¤μ  λ μ½”λ“ μ •λ³΄ λ³΄κ΄€
- λ„λ©”μΈ μ†μ μκ°€ κ΄€λ¦¬ν•κ±°λ‚ DNS μ„λΉ„μ¤ μ—…μ²΄μ— μ„μ„

---

## 4. DNS λ μ½”λ“ μΆ…λ¥

| λ μ½”λ“ | μ„¤λ… | μμ‹ |
|--------|------|------|
| **A** | λ„λ©”μΈ β†’ IPv4 μ£Όμ† λ§¤ν•‘ | `example.com β†’ 93.184.216.34` |
| **AAAA** | λ„λ©”μΈ β†’ IPv6 μ£Όμ† λ§¤ν•‘ | `example.com β†’ 2606:2800:220:1:248:1893:25c8:1946` |
| **CNAME** | λ³„μΉ­(Alias) μ„¤μ • | `www.example.com β†’ example.com` |
| **MX** | λ©”μΌ μ„λ²„ μ •λ³΄ (μ°μ„ μμ„ ν¬ν•¨) | `example.com β†’ 10 mail.example.com` |
| **NS** | λ„¤μ„μ„λ²„ μ •λ³΄ | `example.com β†’ ns1.example.com` |
| **TXT** | μΈμ¦/λ¶€κ°€μ •λ³΄ (SPF, DKIM λ“±) | `v=spf1 include:_spf.google.com ~all` |
| **PTR** | μ—­λ°©ν–¥ μ΅°ν (IP β†’ λ„λ©”μΈ) | `34.216.184.93.in-addr.arpa β†’ example.com` |
| **SOA** | λ„λ©”μΈ κ¶ν• μ •λ³΄ | μ‹λ¦¬μ–Ό λ²νΈ, κ°±μ‹  μ£ΌκΈ°, TTL λ“± |

---

## 5. DNS μΊμ‹±κ³Ό TTL

### μΊμ‹± λ‹¨κ³„
1. **λΈλΌμ°μ € μΊμ‹**: λΈλΌμ°μ €λ³„ λ‚΄μ¥ μΊμ‹
2. **OS μΊμ‹**: hosts νμΌ, DNS Client Service
3. **λ΅μ»¨ DNS μ„λ²„ μΊμ‹**: ISPλ‚ μ΅°μ§ λ‚΄ DNS μ„λ²„
4. **Authoritative μ„λ²„**: μ›λ³Έ λ°μ΄ν„°

### TTL (Time To Live)
- **μ •μ**: DNS λ μ½”λ“κ°€ μΊμ‹μ— μ €μ¥λλ” μ‹κ°„(μ΄ λ‹¨μ„)
- **μμ‹**: TTL 3600 = 1μ‹κ°„ λ™μ• μΊμ‹ μ μ§€
- **νΈλ μ΄λ“μ¤ν”„**:
    - TTL κΈΈκ² β†’ μ„±λ¥ μΆ‹μ, λ³€κ²½ λ°μ λλ¦Ό
    - TTL μ§§κ² β†’ λ³€κ²½ λ°μ λΉ λ¦„, DNS μ§μ λ¶€ν• μ¦κ°€

π‘‰ μΊμ‹±μ„ ν†µν•΄ **μ„±λ¥ ν–¥μƒ, λ¶ν•„μ”ν• DNS μ§μ κ°μ†**

---

## 6. DNS μ§μ λ°©μ‹

### 1) μ¬κ·€μ  μ§μ (Recursive Query)
- λ΅μ»¬ DNSκ°€ **μµμΆ… λ‹µλ³€μ„ μ°Ύμ„ λ•κΉμ§€** λ€μ‹  νƒμƒ‰
- ν΄λΌμ΄μ–ΈνΈλ” ν• λ²λ§ μ§μν•κ³  μ™„μ „ν• λ‹µλ³€ μμ‹ 

### 2) λ°λ³µμ  μ§μ (Iterative Query)
- κ° μ„λ²„κ°€ **λ‹¤μ μ„λ²„ μ •λ³΄λ§** μ•λ ¤μ¤
- ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ μ—¬λ¬ μ„λ²„μ— μμ°¨ μ§μ

### μΌλ°μ  μ΅°ν•©
- **ν΄λΌμ΄μ–ΈνΈ β†” λ΅μ»¬ DNS**: μ¬κ·€μ  μ§μ
- **λ΅μ»¬ DNS β†” Root/TLD/Authoritative**: λ°λ³µμ  μ§μ

---

## 7. DNS λ³΄μ• μ΄μμ™€ ν•΄κ²°μ±…

### μ£Όμ” λ³΄μ• μ„ν‘
1. **DNS μ¤ν‘Έν•‘/ν¬μ΄μ¦λ‹**: κ°€μ§ DNS μ‘λ‹µμΌλ΅ μλ»λ IP μ „λ‹¬
2. **DNS ν•μ΄μ¬ν‚Ή**: DNS μ„¤μ • λ³€κ²½μΌλ΅ νΈλν”½ μ°ν
3. **DDoS κ³µκ²©**: DNS μ„λ²„ κ³Όλ¶€ν•λ΅ μ„λΉ„μ¤ λ§λΉ„

### λ³΄μ• κ°•ν™” λ°©λ²•
- **DNSSEC**: λ””μ§€ν„Έ μ„λ…μΌλ΅ DNS μ‘λ‹µ λ¬΄κ²°μ„± κ²€μ¦
- **DNS over HTTPS (DoH)**: HTTPSλ΅ DNS μ§μ μ•”νΈν™”
- **DNS over TLS (DoT)**: TLSλ΅ DNS μ§μ μ•”νΈν™”

---

## 8. μ‹¤μ  ν™μ© μμ‹

### μ›Ήμ‚¬μ΄νΈ μ ‘μ† κ³Όμ •
`www.google.com` μ ‘μ† μ‹:
1. **λΈλΌμ°μ €** β†’ λ΅μ»¬ DNS (μΊμ‹ ν™•μΈ)
2. μ—†μΌλ©΄ **Root μ„λ²„** β†’ **TLD(.com)** β†’ **Authoritative DNS**
3. **IP μ£Όμ† λ°ν™** β†’ TCP/UDP μ†μΌ“ μ—°κ²° μ‹μ‘
4. HTTP/HTTPS μ”μ²­ μ „μ†΅

### DNS μ¥μ•  μ‹ μν–¥
- 2016λ…„ Dyn DNS λ€λ€: Twitter, Netflix, Spotify λ“± μ ‘μ† λ¶κ°€
- 2021λ…„ Cloudflare μ¥μ• : μλ§μ€ μ›Ήμ‚¬μ΄νΈ μΌμ‹ μ ‘μ† μ¤‘λ‹¨

π‘‰ DNSλ” **μΈν„°λ„· μΈν”„λΌμ ν•µμ‹¬**, μ¥μ•  μ‹ κ΄‘λ²”μ„ν• μν–¥

---

## 9. ν•µμ‹¬ μ”μ•½

- **DNS = μΈν„°λ„· μ „ν™”λ²νΈλ¶€** (λ„λ©”μΈ β†” IP λ§¤ν•‘)
- **κ³„μΈµ κµ¬μ΅°**: Root β†’ TLD β†’ Authoritative
- **μ£Όμ” λ μ½”λ“**: A, AAAA, CNAME, MX, NS, TXT
- **μΊμ‹±**: TTL κΈ°λ° μ„±λ¥ ν–¥μƒ
- **μ§μ λ°©μ‹**: μ¬κ·€μ (ν΄λΌμ΄μ–ΈνΈ β†” λ΅μ»¬ DNS), λ°λ³µμ (DNS μ„λ²„ κ°„)
- **λ³΄μ•**: DNSSEC, DoH, DoTλ΅ κ°•ν™”
- **μ¤‘μ”μ„±**: μΈν„°λ„· μΈν”„λΌμ ν•µμ‹¬, μ¥μ•  μ‹ κ΄‘λ²”μ„ν• μν–¥