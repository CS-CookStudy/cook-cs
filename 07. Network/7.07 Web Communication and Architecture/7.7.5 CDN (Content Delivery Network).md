# 7.7.5 CDN (Content Delivery Network)

## 1. 정의
**CDN(Content Delivery Network)**은 전 세계에 분산된 **캐시 서버 네트워크**를 통해  
클라이언트가 요청한 콘텐츠를 가장 가까운 서버(Edge Server)에서 전달하는 기술이다.

주요 목적은 **빠른 응답 속도**, **트래픽 분산**, **서비스 가용성** 확보이다.

---

## 2. 필요성
- **지리적 지연(Latency) 해결**: 사용자가 Origin 서버와 물리적으로 멀어도 가까운 Edge 서버에서 응답 제공
- **성능 향상**: 정적 리소스를 캐싱하여 웹 페이지 로딩 속도 개선
- **서버 부하 감소**: Origin 서버의 요청을 줄여 안정성 확보
- **대규모 트래픽 처리**: 이벤트, 스트리밍, 대규모 사용자 접속 시에도 안정적 서비스
- **보안 강화**: DDoS 공격 방어, SSL 오프로딩, 봇 필터링 지원

---

## 3. 구조와 동작 방식
```text
[Client] → [CDN Edge Server] → (Cache HIT → 즉시 응답)
                               (Cache MISS → Origin Server → Edge에 캐싱 → 응답)
```

### 동작 과정

1. 클라이언트가 콘텐츠 요청을 보냄
2. CDN의 **Edge Server**가 요청을 수신
3. **캐시 HIT**: Edge 서버에 콘텐츠가 존재하면 즉시 응답
4. **캐시 MISS**: Edge 서버에 없으면 Origin 서버에서 가져와 캐싱 후 클라이언트에 전달
5. 이후 동일 요청은 Edge 서버 캐시에서 바로 응답

---

## 4. 특징

- **정적 콘텐츠 캐싱**: HTML, CSS, JS, 이미지, 동영상 등 자주 요청되는 리소스를 Edge 서버에 저장
- **동적 콘텐츠 최적화**: 압축, 이미지 최적화, HTTP/2·QUIC 등 최신 프로토콜 지원
- **글로벌 Edge 네트워크**: 사용자의 지리적 위치에 따라 가장 가까운 서버로 라우팅 (Anycast)
- **고가용성**: 특정 Edge 서버 장애 시 자동으로 다른 서버로 우회
- **보안 기능**: SSL/TLS 인증, DDoS 방어, WAF(Web Application Firewall)와 연계

---

## 5. 비교

### 1) CDN vs 일반 서버
| 구분 | 일반 서버 | CDN |
|------|-----------|-----|
| **응답 위치** | Origin 서버에서 직접 응답 | 전 세계 Edge 서버에서 응답 |
| **지연 시간** | 사용자와 서버 거리만큼 지연 발생 | 가까운 Edge에서 응답 → 지연 최소화 |
| **트래픽 부담** | 모든 요청이 Origin 서버에 집중 | 요청 분산으로 Origin 부하 감소 |
| **장애 대응** | Origin 서버 장애 시 전체 서비스 중단 | Edge 서버 통해 장애 구간 우회 가능 |

---

### 2) CDN vs 리버스 프록시
| 구분 | 리버스 프록시 | CDN |
|------|----------------|-----|
| **배치 위치** | 서버 앞단 (데이터센터 내부/근처) | 전 세계 분산된 Edge 노드 |
| **주요 목적** | 서버 보안, 로드 밸런싱, SSL 종료 | 지연 최소화, 글로벌 트래픽 분산 |
| **범위** | 특정 서비스나 데이터센터 단위 | 전 세계 사용자 대상으로 확장 |
| **예시** | Nginx, HAProxy | Cloudflare, Akamai, AWS CloudFront |

---

## 6. 대표 서비스 예시

- **Cloudflare**: 글로벌 Anycast 네트워크, DDoS 방어, WAF, Zero Trust 보안 기능 제공
- **Akamai**: 세계 최대 규모 CDN 사업자, 대규모 스트리밍/콘텐츠 전송에 강점
- **AWS CloudFront**: AWS와 연동 최적화, S3·EC2·Lambda@Edge와 통합
- **GCP Cloud CDN**: Google 글로벌 네트워크 기반, BigQuery/Compute Engine과 연계
- **Azure CDN**: Microsoft Azure 서비스와 연계, 미디어 스트리밍 특화

---

## 7. 운영 고려사항

- **캐시 무효화(Invalidation)**: 콘텐츠가 변경되었을 때 Edge 서버 캐시를 갱신하는 정책 필요
- **TTL(Time To Live) 관리**: 캐시 유지 시간을 적절히 설정해야 최신성과 성능을 균형 있게 확보
- **동적 콘텐츠 한계**: 사용자별 맞춤 응답이나 자주 변경되는 데이터는 캐싱 어려움 → Origin 직접 호출 필요
- **비용 구조**: 트래픽 기반 과금 모델이 일반적이므로, 사용량 증가에 따른 비용 관리 필요
- **로그/모니터링**: Edge 서버 로그를 활용해 사용자 지역, 요청 패턴, 보안 위협 모니터링 가능

---

## 8. 핵심 요약
- **CDN**은 전 세계에 분산된 Edge 서버를 통해 콘텐츠를 빠르게 전달하는 네트워크이다.
- Origin 서버 부하를 줄이고, 지연을 최소화하며, 대규모 트래픽과 보안 위협에 대응한다.
- 정적 리소스 캐싱뿐 아니라 동적 최적화·보안 기능까지 제공하는 현대 웹 인프라의 핵심 요소이다.
