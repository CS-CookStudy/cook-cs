# TCP/IP 4계층 모델 (면접 대비)

## 1. TCP/IP 모델 개요

> 실제 인터넷에서 사용되는 4계층 네트워크 모델 (1970년대 ARPANET 기원)

### OSI vs TCP/IP 비교

| OSI 7계층                          | TCP/IP 4계층          | 설명                 |
| ---------------------------------- | --------------------- | -------------------- |
| Application, Presentation, Session | **Application**       | 애플리케이션 서비스  |
| Transport                          | **Transport**         | 종단간 통신          |
| Network                            | **Internet**          | 라우팅, IP 주소      |
| Data Link, Physical                | **Network Interface** | 물리적 네트워크 접근 |

## 2. TCP/IP 4계층 구조

| 계층  | 이름                  | 주요 기능       | 데이터 단위 | 핵심 프로토콜            |
| ----- | --------------------- | --------------- | ----------- | ------------------------ |
| **4** | **Application**       | 네트워크 서비스 | Message     | **HTTP, FTP, SMTP, DNS** |
| **3** | **Transport**         | 종단간 통신     | **Segment** | **TCP, UDP**             |
| **2** | **Internet**          | 패킷 라우팅     | **Packet**  | **IP, ICMP, ARP**        |
| **1** | **Network Interface** | 물리적 접근     | **Frame**   | **Ethernet, Wi-Fi**      |

## 3. 계층별 핵심 내용

### 📍 Network Interface Layer (1계층)

- **기능**: OSI의 Physical + Data Link 계층 역할
- **주요 기술**: Ethernet, Wi-Fi, PPP
- **주소**: MAC 주소 (48비트)

### 📍 Internet Layer (2계층)

#### IP (Internet Protocol)

- **IPv4**: 32비트 주소 (예: 192.168.1.1)
- **IPv6**: 128비트 주소 (예: 2001:db8::1)

#### 주요 프로토콜

- **IP**: 패킷 라우팅
- **ICMP**: 오류 보고, ping/traceroute
- **ARP**: IP → MAC 주소 변환

### 📍 Transport Layer (3계층)

#### TCP 특징

- **연결 지향**: 3-way handshake
- **신뢰성 보장**: 순서 보장, 재전송
- **흐름 제어**: 슬라이딩 윈도우
- **혼잡 제어**: 네트워크 상황 대응

#### TCP 3-way Handshake

```
1. Client → Server: SYN
2. Server → Client: SYN + ACK
3. Client → Server: ACK
→ 연결 설정 완료
```

#### UDP 특징

- **비연결성**: 연결 설정 없음
- **빠른 전송**: 최소 오버헤드
- **신뢰성 미보장**: 순서, 중복, 손실 보장 안 함

#### 포트 번호

- **Well-known Ports (0-1023)**: 표준 서비스
- **등록된 포트 (1024-49151)**: 애플리케이션용
- **동적 포트 (49152-65535)**: 클라이언트 임시 포트

### 📍 Application Layer (4계층)

#### 주요 프로토콜과 포트

| 프로토콜   | 포트  | 기능           | 프로토콜 타입 |
| ---------- | ----- | -------------- | ------------- |
| **HTTP**   | 80    | 웹 서비스      | TCP           |
| **HTTPS**  | 443   | 보안 웹 서비스 | TCP           |
| **FTP**    | 21    | 파일 전송      | TCP           |
| **SMTP**   | 25    | 메일 송신      | TCP           |
| **DNS**    | 53    | 도메인 변환    | **TCP/UDP**   |
| **DHCP**   | 67/68 | 동적 IP 할당   | UDP           |
| **SSH**    | 22    | 보안 원격 접속 | TCP           |
| **Telnet** | 23    | 원격 터미널    | TCP           |

## 4. 캡슐화 과정 (실제 예시)

### 웹 브라우저에서 HTTP 요청 시

```
Application:      [HTTP GET Request]
Transport:        [TCP Header | HTTP Request] (Segment)
Internet:         [IP Header | TCP Header | HTTP Request] (Packet)
Network Interface: [Ethernet Header | IP Header | TCP Header | HTTP Request | Trailer] (Frame)
```

## 5. IP 주소 체계

### IPv4 클래스

- **클래스 A**: 1.0.0.0 ~ 126.255.255.255 (대규모)
- **클래스 B**: 128.0.0.0 ~ 191.255.255.255 (중규모)
- **클래스 C**: 192.0.0.0 ~ 223.255.255.255 (소규모)

### 사설 IP 주소

- **클래스 A**: 10.0.0.0/8
- **클래스 B**: 172.16.0.0/12
- **클래스 C**: 192.168.0.0/16
