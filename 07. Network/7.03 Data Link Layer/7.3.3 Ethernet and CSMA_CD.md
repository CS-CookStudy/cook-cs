# 이더넷과 CSMA/CD

## 1. 이더넷 (Ethernet) 개요

### 기본 개념

- **가장 널리 사용되는 LAN 기술** (IEEE 802.3 표준)
- 1973년 제록스에서 개발
- 과거: 공유 매체(버스) → 현재: 스위치 기반 전용 매체

### 이더넷 표준과 발전

```
클래식 이더넷:
- 10BASE5 (굵은 동축, 500m)
- 10BASE2 (얇은 동축, 185m)
- 10BASE-T (UTP, 100m)

현대 이더넷:
- 100BASE-TX (Fast Ethernet, 100Mbps)
- 1000BASE-T (Gigabit Ethernet, 1Gbps)
- 10GBASE-T (10 Gigabit Ethernet)
```

### 이더넷 프레임 구조

```
┌──────────┬──────────┬────────┬──────────┬─────┐
│  목적지   │  출발지   │길이/타입│  데이터   │ FCS │
│ MAC 주소  │ MAC 주소 │        │          │     │
│ (6바이트) │ (6바이트) │(2바이트)│(46-1500B)│(4B) │
└──────────┴──────────┴────────┴──────────┴─────┘

전체 프레임: 64~1518 바이트
```

- **목적지/출발지 MAC**: 하드웨어 주소
- **길이/타입**: 데이터 길이 또는 프로토콜 타입
- **FCS**: CRC-32 오류 검출 코드

## 2. CSMA/CD 프로토콜

### CSMA/CD란?

- **Carrier Sense Multiple Access with Collision Detection**
- 공유 매체에서 여러 장치가 접근할 때 충돌을 해결하는 방법
- 현재는 스위치 환경에서 사용하지 않음

### 구성 요소

**1. CS (Carrier Sense) - 반송파 감지**

- 전송 전에 매체가 사용 중인지 확인
- 매체가 비어있을 때만 전송 시작

**2. MA (Multiple Access) - 다중 접근**

- 여러 스테이션이 동시에 매체 접근 가능
- 모든 장치가 평등한 접근 권한

**3. CD (Collision Detection) - 충돌 감지**

- 전송 중 충돌 발생 시 즉시 감지
- 충돌 감지 후 잼 신호 전송

### CSMA/CD 동작 과정

```
1. 전송할 데이터가 있는가? → Yes
2. 매체가 비어있는가? → No: 대기, Yes: 다음 단계
3. 데이터 전송 시작
4. 충돌 감지? → No: 전송 완료, Yes: 다음 단계
5. 잼 신호 전송 (32비트)
6. 백오프 알고리즘 실행
7. 대기 후 1단계로 돌아감
```

### 백오프 알고리즘 (Binary Exponential Backoff)

**동작 원리:**

- 충돌 후 재시도 전에 임의의 시간 대기
- 충돌 횟수가 증가할수록 대기 시간 지수적 증가

**알고리즘:**

```
k번째 충돌 발생 시:
1. r = 0 ~ (2^min(k,10) - 1) 중 랜덤 선택
2. 대기시간 = r × 슬롯시간 (512 비트시간)
3. 16번 연속 실패 시 포기

예시:
1번째 충돌: 0~1 × 슬롯시간
2번째 충돌: 0~3 × 슬롯시간
3번째 충돌: 0~7 × 슬롯시간
```

## 3. 충돌과 성능 분석

### 충돌 발생 조건

- **전파 지연** 동안 다른 장치가 전송 시작하면 충돌
- 최악의 경우: **2 × 전파지연** 시간 후 충돌 감지

### 슬롯 시간

- **512 비트시간** = 최대 왕복 전파지연
- 10Mbps 이더넷: 51.2μs
- **최소 프레임 크기**: 64바이트 (충돌 감지 보장)

### 성능 영향 요인

- 네트워크 로드 (높을수록 충돌 증가)
- 전파 지연 (길수록 효율성 감소)
- 프레임 크기 (클수록 효율성 증가)

## 4. 현대 이더넷의 변화

### 허브 vs 스위치

**허브 기반 (과거)**

```
┌─────┐    ┌─────┐    ┌─────┐
│ PC1 │────│ HUB │────│ PC2 │
└─────┘    └─────┘    └─────┘
              │
           ┌─────┐
           │ PC3 │
           └─────┘

- 공유 매체 (모든 PC가 대역폭 공유)
- 하나의 충돌 도메인
- CSMA/CD 필요
- 반이중 통신만 가능
```

**스위치 기반 (현재)**

```
┌─────┐    ┌────────┐    ┌─────┐
│ PC1 │────│ Switch │────│ PC2 │
└─────┘    └────────┘    └─────┘
                │
             ┌─────┐
             │ PC3 │
             └─────┘

- 전용 매체 (각 포트가 독립적)
- 포트별 충돌 도메인
- CSMA/CD 불필요
- 전이중 통신 가능
```

### 전이중 이더넷 (Full-Duplex)

- **동시 송수신 가능** (별도 송신/수신 채널)
- **충돌 없음** → CSMA/CD 사용 안함
- **대역폭 2배 효과**
- **거리 제한 완화**

## 5. 주요 이더넷 표준

| 표준       | 속도    | 매체      | 최대거리 | 특징             |
| ---------- | ------- | --------- | -------- | ---------------- |
| 10BASE-T   | 10Mbps  | UTP Cat3  | 100m     | 기본 이더넷      |
| 100BASE-TX | 100Mbps | UTP Cat5  | 100m     | Fast Ethernet    |
| 1000BASE-T | 1Gbps   | UTP Cat5e | 100m     | Gigabit Ethernet |
| 10GBASE-T  | 10Gbps  | UTP Cat6a | 100m     | 10G Ethernet     |
