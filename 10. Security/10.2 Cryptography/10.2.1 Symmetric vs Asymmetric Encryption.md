# 10.2.1 대칭키 vs 비대칭키 암호화

## 1. 암호화 기본 개념 정의

### 암호화 (Encryption)
**평문(Plaintext)을 암호문(Ciphertext)으로 변환하여 제3자가 읽을 수 없도록 하는 기술**이다.
데이터의 기밀성을 보장하는 핵심 보안 기술로, 키(Key)를 사용하여 암호화/복호화를 수행한다.

### 암호화 구성 요소
- **평문(Plaintext)**: 원본 데이터
- **암호문(Ciphertext)**: 암호화된 데이터
- **키(Key)**: 암호화/복호화에 사용되는 비밀 정보
- **알고리즘**: 암호화/복호화 수행 방법

---

## 2. 대칭키 암호화 (Symmetric Encryption)

### 정의 및 동작 원리
**암호화와 복호화에 동일한 키를 사용하는 방식**이다.
송신자와 수신자가 같은 비밀키를 공유하여 데이터를 암호화/복호화한다.

```
평문 + 비밀키 → [암호화] → 암호문
암호문 + 비밀키 → [복호화] → 평문
```

### 장점
- **빠른 속도**: 연산이 단순하여 처리 속도가 빠름
- **효율성**: 대용량 데이터 처리에 적합
- **리소스 절약**: CPU, 메모리 사용량이 적음

### 단점
- **키 배송 문제**: 안전한 키 교환이 어려움
- **키 관리 복잡성**: n명이 통신 시 n(n-1)/2개의 키 필요
- **부인 방지 불가**: 누가 암호화했는지 구분 어려움

### 주요 알고리즘

#### AES (Advanced Encryption Standard)
- **표준**: 미국 정부 표준 암호 알고리즘
- **키 길이**: 128, 192, 256비트
- **특징**: 현재 가장 널리 사용되는 대칭키 암호
- **용도**: 파일 암호화, 네트워크 통신, 데이터베이스 암호화

#### DES (Data Encryption Standard)
- **키 길이**: 56비트 (실제로는 64비트, 8비트는 패리티)
- **특징**: 현재는 키 길이가 짧아 보안상 취약
- **상태**: 짧은 키 길이(56비트)와 브루트포스 공격으로 인해 1990년대 이후 사실상 폐기, AES로 대체

---

## 3. 비대칭키 암호화 (Asymmetric Encryption)

### 정의 및 동작 원리
**공개키와 개인키 한 쌍을 사용하는 방식**이다.
공개키로 암호화하면 개인키로만 복호화 가능하고, 개인키로 암호화하면 공개키로만 복호화 가능하다.

```
평문 + 공개키 → [암호화] → 암호문
암호문 + 개인키 → [복호화] → 평문
```

### 장점
- **키 배송 문제 해결**: 공개키는 공개되어도 안전
- **디지털 서명 가능**: 개인키로 서명, 공개키로 검증
- **부인 방지**: 개인키 소유자만 서명 생성 가능

### 단점
- **느린 속도**: 복잡한 수학 연산으로 인한 속도 저하
- **리소스 소모**: CPU, 메모리 사용량이 많음
- **대용량 데이터 부적합**: 큰 파일 암호화 시 비효율적

### 주요 알고리즘

#### RSA (Rivest-Shamir-Adleman)
- **원리**: 큰 소수의 곱셈과 소인수분해의 어려움 이용
- **키 길이**: 1024, 2048, 4096비트
- **용도**: 디지털 서명, 키 교환, SSL/TLS

#### ECC (Elliptic Curve Cryptography)
- **원리**: 타원곡선상의 이산로그 문제 이용
- **특징**: RSA보다 짧은 키로 같은 수준의 보안 제공
- **장점**: 모바일 환경에 적합 (낮은 전력 소모)

---

## 4. 대칭키 vs 비대칭키 비교표

| 구분 | 대칭키 | 비대칭키 |
|------|--------|----------|
| **사용 키** | 동일한 비밀키 | 공개키 + 개인키 쌍 |
| **연산 속도** | 빠름 (1000배 이상) | 느림 |
| **키 길이** | 128~256비트 | 1024~4096비트 |
| **리소스 사용** | 적음 | 많음 |
| **키 관리** | 복잡 (n²개) | 간단 (2n개) |
| **키 교환** | 어려움 | 쉬움 |
| **디지털 서명** | 불가능 | 가능 |
| **대용량 데이터** | 적합 | 부적합 |
| **사용처** | 데이터 암호화 | 키 교환, 인증 |

---

## 5. 키 교환 문제와 해결책

### 키 교환 문제 (Key Exchange Problem)
대칭키 암호화의 핵심 문제로, **통신 당사자들이 어떻게 안전하게 비밀키를 공유할 것인가**에 대한 문제다.

### 해결책

#### 1) Diffie-Hellman 키 교환
- **원리**: 이산로그 문제의 어려움 이용
- **특징**: 공개 채널에서 안전하게 비밀키 생성
- **장점**: 제3자가 통신을 엿들어도 비밀키 추출 불가
- **용도**: 키 교환 전용 (암호화/복호화 불가)

#### 2) 비대칭키를 이용한 키 전달
- 비대칭키로 대칭키를 암호화하여 전송
- 안전한 키 배송 후 대칭키로 실제 데이터 암호화

#### 3) 사전 공유 키 (PSK)
- 오프라인에서 미리 키를 공유
- 물리적으로 안전한 채널을 통한 키 배송

---

## 6. 하이브리드 암호화 (Hybrid Encryption)

### 개념
**대칭키와 비대칭키의 장점을 결합한 방식**으로, 실제 대부분의 보안 시스템에서 사용된다.

### HTTPS 동작 방식

#### 1단계: 핸드셰이크 (비대칭키 사용)
```
클라이언트 → 서버: 인증서 요청
서버 → 클라이언트: 공개키 포함된 인증서 전송
클라이언트: 세션키(대칭키) 생성
클라이언트 → 서버: 공개키로 세션키 암호화하여 전송
```

#### 2단계: 데이터 통신 (대칭키 사용)
```
이후 모든 통신은 세션키(대칭키)로 암호화
빠른 속도로 대용량 데이터 처리 가능
```

### 장점
- **보안**: 비대칭키로 안전한 키 교환
- **성능**: 대칭키로 빠른 데이터 처리
- **확장성**: 다수 클라이언트와 효율적 통신

---

## 7. 디지털 서명 vs 암호화 차이점

| 구분 | 디지털 서명 | 암호화 |
|------|-------------|--------|
| **목적** | 무결성, 인증, 부인방지 | 기밀성 |
| **사용 키** | 개인키로 서명 | 공개키로 암호화 |
| **검증** | 공개키로 검증 | 개인키로 복호화 |
| **내용 보호** | 내용 자체는 보호 목적이 아님 (무결성 검증이 목적) | 내용 숨김 |
| **변조 탐지** | 가능 | 불가능 |

### 디지털 서명이란?
**개인키로 문서에 서명하여 문서의 무결성과 작성자 신원을 보장하는 기술**이다.
암호화와 달리 내용을 숨기는 것이 목적이 아니라, "누가 작성했는지"와 "변조되지 않았는지"를 증명하는 것이 목적이다.

### 서명 과정
```
원본 문서 → 해시함수 → 해시값 → 개인키 서명 → 디지털 서명
```

### 검증 과정
```
디지털 서명 → 공개키 검증 → 해시값 → 원본 문서와 비교
```

---

## 8. 해시 vs 암호화 차이점

| 구분 | 해시 | 암호화 |
|------|------|--------|
| **방향성** | 단방향 (복원 불가) | 양방향 (복원 가능) |
| **키 사용** | 키 불필요 | 키 필요 |
| **출력 크기** | 고정 크기 | 입력에 따라 변동 |
| **목적** | 무결성 검증 | 기밀성 보장 |
| **대표 알고리즘** | SHA-256, MD5 | AES, RSA |

### 해시 함수란?
**임의의 크기 데이터를 고정된 크기의 해시값(다이제스트)으로 변환하는 함수**이다.
암호화와 달리 원본 데이터로 복원할 수 없는 단방향 함수로, 데이터의 무결성 검증에 사용된다.

### 해시 함수 특징
- **결정적**: 같은 입력은 항상 같은 출력
- **눈사태 효과**: 입력 1비트 변경 시 출력 50% 변경
- **일방향성**: 해시값으로 원본 추출 불가
- **충돌 저항성**: 같은 해시값을 갖는 다른 입력 찾기 어려움

---

## 9. 핵심 요약

```
대칭키: 같은 키, 빠름, 키교환 문제
비대칭키: 공개키+개인키, 느림, 키교환 해결
하이브리드: 비대칭키(키교환) + 대칭키(데이터)
```

- **대칭키**: 빠르지만 키 교환 문제 존재
- **비대칭키**: 느리지만 키 교환 문제 해결
- **하이브리드**: 두 방식의 장점 결합 (HTTPS 방식)
- **디지털 서명**: 무결성/인증, 암호화는 기밀성
- **해시**: 단방향, 무결성 검증 전용