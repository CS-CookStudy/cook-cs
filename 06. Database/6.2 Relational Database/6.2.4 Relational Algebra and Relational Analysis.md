# 관계형 대수와 관계형 해석 정리

## 1. 개요

### 정의

- **관계형 대수(Relational Algebra)**: 관계형 데이터베이스에서 데이터를 조작하는 **절차적 언어**
- **관계형 해석(Relational Calculus)**: 원하는 결과만 명시하는 **선언적 언어**

### 핵심 차이점

| 특성      | 관계형 대수  | 관계형 해석   |
| --------- | ------------ | ------------- |
| 접근 방식 | 절차적 (How) | 선언적 (What) |
| 연산 방식 | 단계별 연산  | 조건 명시     |
| SQL 관계  | 구현 방법    | 이론적 기반   |

---

## 2. 관계형 대수 (Relational Algebra)

### 2.1 기본 개념

**관계형 대수**는 관계(테이블)를 입력으로 받아 새로운 관계를 출력하는 연산들의 집합이다.

### 2.2 기본 연산 (Fundamental Operations)

#### 선택 (Selection) - σ (시그마)

**정의**: 주어진 조건을 만족하는 튜플들을 선택

```
표기법: σ조건(R)

예시:
학생 테이블에서 학년이 3인 학생들 선택
σ학년=3(학생)

결과: 3학년 학생들만 포함된 테이블
```

#### 투상 (Projection) - π (파이)

**정의**: 지정된 속성들만 추출

```
표기법: π속성리스트(R)

예시:
학생 테이블에서 이름과 학과만 추출
π이름,학과(학생)

결과: 이름과 학과 컬럼만 있는 테이블
```

#### 합집합 (Union) - ∪

**정의**: 두 릴레이션의 모든 튜플을 합침

```
표기법: R ∪ S

조건:
- 합집합 호환성 (같은 속성 개수, 대응 속성의 도메인 동일)
- 중복 튜플 제거

예시:
컴공과학생 ∪ 전자과학생 = 두 학과 학생 전체
```

#### 차집합 (Difference) - -

**정의**: 첫 번째 릴레이션에만 있는 튜플들

```
표기법: R - S

예시:
전체학생 - 휴학생 = 재학생
```

#### 곱집합 (Cartesian Product) - ×

**정의**: 두 릴레이션의 모든 가능한 튜플 조합

```
표기법: R × S

결과:
- 속성 개수: |R의 속성| + |S의 속성|
- 튜플 개수: |R의 튜플| × |S의 튜플|

예시:
학생(3개 튜플) × 과목(4개 튜플) = 12개 튜플
```

#### 개명 (Rename) - ρ (로)

**정의**: 릴레이션이나 속성의 이름을 변경

```
표기법:
ρ새이름(R) - 릴레이션 이름 변경
ρ새이름←기존이름(R) - 속성 이름 변경

예시:
ρ학생정보(학생) - 학생 테이블을 학생정보로 개명
```

### 2.3 유도 연산 (Derived Operations)

#### 교집합 (Intersection) - ∩

```
정의: R ∩ S = R - (R - S)
의미: 두 릴레이션에 공통으로 있는 튜플들
```

#### 조인 (Join) - ⋈

##### 세타 조인 (Theta Join)

```
표기법: R ⋈조건 S = σ조건(R × S)

예시:
학생 ⋈학생.학과=학과.학과명 학과
= 학생과 학과를 학과 기준으로 연결
```

##### 동등 조인 (Equi Join)

```
세타 조인에서 조건이 등호(=)인 경우

예시:
학생 ⋈학번=학번 수강
```

##### 자연 조인 (Natural Join)

```
표기법: R ⋈ S
특징:
- 같은 이름의 속성에 대해 자동으로 동등 조인
- 중복 속성 제거

예시:
학생 ⋈ 수강 (학번 속성으로 자동 조인)
```

#### 나눗셈 (Division) - ÷

```
표기법: R ÷ S
의미: S의 모든 튜플과 관련된 R의 튜플들

예시:
수강 ÷ 필수과목 = 필수과목을 모두 수강한 학생들
```

---

## 3. 관계형 해석 (Relational Calculus)

### 3.1 기본 개념

**관계형 해석**은 원하는 결과의 특성만 명시하는 선언적 언어이다.

### 3.2 종류

#### 튜플 관계 해석 (Tuple Relational Calculus)

**형식**: {t | P(t)}

- t: 튜플 변수
- P(t): t에 대한 조건

```
예시: "컴퓨터공학과 학생들"
{t | 학생(t) ∧ t.학과 = '컴퓨터공학과'}

의미: 학생 릴레이션에 속하고 학과가 컴퓨터공학과인 모든 튜플 t
```

#### 도메인 관계 해석 (Domain Relational Calculus)

**형식**: {<x₁, x₂, ..., xₙ> | P(x₁, x₂, ..., xₙ)}

- xᵢ: 도메인 변수
- P: 변수들에 대한 조건

```
예시: "컴퓨터공학과 학생들의 이름"
{<n> | ∃s, d, g (학생(s, n, d, g) ∧ d = '컴퓨터공학과')}

의미: 학번 s, 이름 n, 학과 d, 학년 g가 존재하여
     학생(s,n,d,g)이고 d가 컴퓨터공학과인 모든 이름 n
```

### 3.3 논리 연산자

#### 기본 연산자

- **∧ (AND)**: 논리곱
- **∨ (OR)**: 논리합
- **¬ (NOT)**: 부정
- **→ (IMPLIES)**: 함의

#### 한정자 (Quantifiers)

- **∃ (존재 한정자)**: "존재한다"
- **∀ (전칭 한정자)**: "모든"

```
예시:
∃t (학생(t) ∧ t.학과 = '컴공과')
→ "컴공과 학생이 존재한다"

∀t (학생(t) → t.학년 ≥ 1)
→ "모든 학생의 학년은 1 이상이다"
```

---

## 4. 관계형 대수 vs 관계형 해석

### 4.1 표현력 비교

- **동등한 표현력**: 둘 다 같은 질의를 표현 가능
- **Codd의 정리**: 관계형 대수와 관계형 해석은 표현력이 동등

### 4.2 실제 예시 비교

```
질의: "데이터베이스 과목을 수강하는 학생 이름"

관계형 대수 (절차적):
π이름(학생 ⋈ (σ과목명='데이터베이스'(수강 ⋈ 과목)))

관계형 해석 (선언적):
{t.이름 | 학생(t) ∧ ∃s, c (수강(s) ∧ 과목(c) ∧
         s.학번 = t.학번 ∧ s.과목코드 = c.과목코드 ∧
         c.과목명 = '데이터베이스')}
```

### 4.3 특징 비교

| 측면        | 관계형 대수    | 관계형 해석     |
| ----------- | -------------- | --------------- |
| 사고 방식   | 단계별 처리    | 결과 중심       |
| 학습 난이도 | 상대적 쉬움    | 상대적 어려움   |
| 구현 관점   | 구현에 가까움  | 명세에 가까움   |
| 최적화      | 연산 순서 중요 | 시스템이 최적화 |
