# 키의 종류 정리

## 1. 키(Key)의 기본 개념

### 정의

**키(Key)** 는 릴레이션에서 **튜플을 유일하게 식별**하거나 **튜플들 간의 관계**를 설정하기 위해 사용되는 속성 또는 속성들의 집합이다.

### 키의 필요성

- **튜플 식별**: 각 레코드를 구별
- **관계 설정**: 테이블 간 연결
- **무결성 보장**: 데이터 일관성 유지
- **검색 효율성**: 빠른 데이터 검색

---

## 2. 키의 계층 구조

```
슈퍼 키 (Super Key)
    ↓
후보 키 (Candidate Key)
    ↓
기본 키 (Primary Key)
    ↓
대체 키 (Alternate Key) + 외래 키 (Foreign Key)
```

---

## 3. 슈퍼 키 (Super Key)

### 정의

**슈퍼 키**는 튜플을 **유일하게 식별할 수 있는** 속성들의 집합이다.

### 특징

- **유일성**: 같은 값을 가진 튜플이 존재하지 않음
- **집합의 개념**: 하나 이상의 속성으로 구성
- **여러 개 존재**: 한 릴레이션에 여러 슈퍼 키 가능

### 예시

```
학생 테이블: (학번, 이름, 주민번호, 학과)

슈퍼 키 예시:
✅ {학번}
✅ {주민번호}
✅ {학번, 이름}
✅ {학번, 학과}
✅ {주민번호, 이름}
✅ {학번, 이름, 학과}

❌ {이름} - 동명이인 가능
❌ {학과} - 같은 학과 학생 여럿
```

---

## 4. 후보 키 (Candidate Key)

### 정의

**후보 키**는 슈퍼 키 중에서 **최소성**을 만족하는 키이다.

### 조건

1. **유일성**: 튜플을 유일하게 식별
2. **최소성**: 속성을 하나라도 제거하면 유일성 상실

### 예시

```
학생 테이블에서:

후보 키:
✅ {학번} - 최소이면서 유일
✅ {주민번호} - 최소이면서 유일

후보 키가 아닌 것:
❌ {학번, 이름} - 최소성 위반 (이름 제거해도 유일)
❌ {이름} - 유일성 위반 (동명이인 존재)
```

---

## 5. 기본 키 (Primary Key)

### 정의

**기본 키**는 후보 키 중에서 **대표로 선택된** 키이다.

### 선택 기준

1. **안정성**: 값이 변경될 가능성이 낮음
2. **단순성**: 속성 개수가 적음
3. **의미성**: 업무적으로 중요함
4. **효율성**: 자주 사용되는 속성

### 특징

- **한 릴레이션에 하나만**: 유일하게 선택
- **NULL 불가**: 개체 무결성 제약
- **중복 불가**: 값의 유일성 보장
- **인덱스 자동 생성**: 검색 성능 향상

### 예시

```
학생 테이블:
후보 키: {학번}, {주민번호}

기본 키 선택: {학번}
이유:
- 학번은 안정적 (변경 가능성 낮음)
- 단순함 (7자리 문자열)
- 업무적 중요성 (학사 시스템의 핵심)

학번(PK) │ 이름   │ 주민번호        │ 학과
─────────┼───────┼───────────────┼──────────
2023001  │ 김철수 │ 990101-1234567│ 컴공과
2023002  │ 이영희 │ 000202-2345678│ 전자과
```

---

## 6. 대체 키 (Alternate Key)

### 정의

**대체 키**는 기본 키로 선택되지 않은 **나머지 후보 키들**이다.

### 특징

- **후보 키의 성질**: 유일성과 최소성 만족
- **보조적 역할**: 기본 키의 대안
- **UNIQUE 제약**: 중복값 허용하지 않음

### 예시

```
학생 테이블에서:
- 기본 키: {학번}
- 대체 키: {주민번호}

→ 주민번호도 학생을 유일하게 식별 가능하지만
  기본 키로 선택되지 않음
```

---

## 7. 외래 키 (Foreign Key)

### 정의

**외래 키**는 **다른 릴레이션의 기본 키를 참조**하는 속성이다.

### 목적

- **관계 설정**: 테이블 간 연결
- **참조 무결성**: 일관성 보장
- **정규화**: 중복 데이터 제거

### 특징

- **참조 테이블 존재**: 참조하는 기본 키가 있어야 함
- **NULL 허용**: 참조 관계가 없을 수 있음
- **참조 무결성**: 존재하지 않는 값 참조 불가

### 예시

```
학생 테이블:
학번(PK)  │ 이름  │ 학과코드(FK)
─────────┼───────┼─────────────
2023001  │ 김철수 │ CSE
2023002  │ 이영희 │ EE

학과 테이블:
학과코드(PK)  │ 학과명
─────────────┼──────────────
CSE          │ 컴퓨터공학과
EE           │ 전자공학과

→ 학생 테이블의 '학과코드'는 학과 테이블을 참조하는 외래 키
```

### 참조 무결성 제약

```
올바른 상태:
학생의 학과코드 = 'CSE' (학과 테이블에 존재)

잘못된 상태:
학생의 학과코드 = 'ME' (학과 테이블에 존재하지 않음) ← 위반!
```

---

## 8. 키 유형 비교 정리

| 키 유형 | 정의                      | 개수    | 특징               |
| ------- | ------------------------- | ------- | ------------------ |
| 슈퍼 키 | 유일성 만족하는 속성 집합 | 여러 개 | 최소성 불필요      |
| 후보 키 | 슈퍼 키 + 최소성          | 여러 개 | 기본 키 후보군     |
| 기본 키 | 선택된 후보 키            | 1개     | NULL 불가, 대표 키 |
| 대체 키 | 선택되지 않은 후보 키     | 여러 개 | UNIQUE 제약        |
| 외래 키 | 다른 테이블 기본 키 참조  | 여러 개 | 관계 설정          |
