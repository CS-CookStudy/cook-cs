# 8.2 버전 관리 - Git 기초와 협업

## 버전 관리 시스템이란?

### 정의

파일의 변경사항을 추적하고 관리하는 시스템으로, **언제, 누가, 무엇을, 왜** 변경했는지 기록하여 협업과 코드 관리를 돕는 도구입니다.

### 필요성

- **변경 이력 추적**: 모든 수정사항을 기록하여 추적 가능
- **백업과 복구**: 실수로 삭제한 파일이나 이전 버전으로 복구
- **협업 지원**: 여러 개발자가 동시에 작업할 수 있도록 지원
- **브랜치 관리**: 기능별로 독립적인 개발 라인 유지

### 종류

- **중앙집중형**: SVN, CVS (중앙 서버에 모든 데이터 저장)
- **분산형**: Git, Mercurial (각 개발자가 전체 복사본 보유)

---

## Git 기본 개념

### Git이란?

2005년 리누스 토르발스가 만든 **분산 버전 관리 시스템**으로, 현재 가장 널리 사용되는 버전 관리 도구입니다.

### 핵심 특징

- **분산 구조**: 로컬과 원격 저장소 모두 완전한 히스토리 보유
- **스냅샷 방식**: 변경사항이 아닌 전체 프로젝트 상태 저장
- **무결성**: SHA-1 해시로 모든 데이터 체크섬 관리
- **브랜치**: 가볍고 빠른 브랜치 생성과 병합

### Git의 세 가지 상태와 영역

```
Working Directory → Staging Area → Repository
   (작업 공간)        (스테이징)      (저장소)
     Modified          Staged        Committed
```

- **Modified**: 파일을 수정했지만 아직 스테이징하지 않은 상태
- **Staged**: 커밋할 준비가 된 상태
- **Committed**: 로컬 저장소에 안전하게 저장된 상태

---

## Git 기본 명령어

### 저장소 설정

```bash
# 새 저장소 초기화
git init

# 원격 저장소 복제
git clone https://github.com/user/repo.git
```

### 기본 작업 흐름

```bash
# 파일 스테이징
git add filename.txt    # 특정 파일
git add .              # 모든 변경사항

# 커밋
git commit -m "커밋 메시지"

# 현재 상태 확인
git status

# 커밋 히스토리 확인
git log --oneline
```

### 변경사항 확인

```bash
# 작업 디렉토리와 스테이징 비교
git diff

# 스테이징과 저장소 비교
git diff --staged

# 특정 커밋 내용 확인
git show commit-hash
```

---

## 브랜치 관리

### 브랜치 기본 개념

브랜치는 **독립적인 개발 라인**으로, 메인 코드에 영향 없이 새 기능을 개발할 수 있게 해줍니다.

```
main:     A --- B --- C --- D
                \
feature:         E --- F --- G
```

### 브랜치 명령어

```bash
# 브랜치 목록 확인
git branch

# 새 브랜치 생성
git branch feature-name

# 브랜치 변경
git switch feature-name
git checkout feature-name

# 브랜치 생성과 동시에 변경
git switch -c feature-name
git checkout -b feature-name

# 브랜치 삭제
git branch -d feature-name
```

### 브랜치 병합

```bash
# 현재 브랜치에 다른 브랜치 병합
git merge feature-name

# 병합 중단
git merge --abort
```

---

## 원격 저장소 작업

### 원격 저장소 관리

```bash
# 원격 저장소 확인
git remote -v

# 원격 저장소 추가
git remote add origin https://github.com/user/repo.git
```

### 동기화 명령어

```bash
# 원격 변경사항 가져오기 (병합하지 않음)
git fetch

# 원격 변경사항 가져와서 병합
git pull

# 로컬 변경사항 원격에 반영
git push

# 새 브랜치를 원격에 푸시
git push -u origin branch-name
```

---

## 충돌 해결

### 충돌 상황

같은 파일의 같은 부분을 서로 다르게 수정했을 때 발생합니다.

### 충돌 표시

```
<<<<<<< HEAD
현재 브랜치의 내용
=======
병합하려는 브랜치의 내용
>>>>>>> branch-name
```

### 해결 과정

1. `git status`로 충돌 파일 확인
2. 충돌 부분을 원하는 코드로 수정
3. `git add` 로 수정된 파일 스테이징
4. `git commit` 으로 병합 완료

---

## 협업 워크플로우

### GitHub Flow (추천)

가장 간단하고 널리 사용되는 워크플로우입니다.

1. `main`에서 `feature` 브랜치 생성
2. 기능 개발 및 커밋
3. 원격 저장소에 브랜치 푸시
4. **Pull Request** 생성
5. 코드 리뷰 후 `main`에 병합
6. 브랜치 삭제

### Git Flow

복잡한 프로젝트에 적합한 워크플로우입니다.

- **main**: 운영 환경 코드
- **develop**: 개발 중인 코드
- **feature**: 기능 개발 브랜치
- **release**: 릴리즈 준비 브랜치
- **hotfix**: 긴급 수정 브랜치

---

## 유용한 Git 명령어

### git stash (임시 저장)

```bash
# 현재 작업 임시 저장
git stash

# 저장 목록 확인
git stash list

# 임시 저장한 작업 복원
git stash apply

# 복원하고 stash에서 삭제
git stash pop
```

### git reset과 revert

```bash
# 마지막 커밋 취소 (변경사항 유지)
git reset HEAD~1

# 마지막 커밋 취소 (변경사항도 삭제)
git reset --hard HEAD~1

# 특정 커밋을 취소하는 새 커밋 생성
git revert commit-hash
```

### git tag (버전 관리)

```bash
# 태그 생성
git tag v1.0.0

# 주석 있는 태그
git tag -a v1.0.0 -m "Version 1.0.0"

# 태그 푸시
git push --tags
```

---

## 협업 베스트 프랙티스

### 좋은 커밋 메시지

```
타입: 간단한 설명 (50자 이내)

예시:
feat: Add user login functionality
fix: Resolve password validation error
docs: Update installation guide
```

**커밋 타입**:

- `feat`: 새 기능
- `fix`: 버그 수정
- `docs`: 문서 수정
- `style`: 코드 스타일 변경
- `refactor`: 코드 리팩토링

### 브랜치 네이밍

```
feature/기능명      : feature/user-login
bugfix/버그명       : bugfix/login-error
hotfix/긴급수정명   : hotfix/security-patch
```

### 자주 하는 실수

1. **큰 커밋**: 여러 기능을 한 커밋에 포함
2. **의미없는 메시지**: "fix", "update" 같은 모호한 메시지
3. **main에서 직접 작업**: 브랜치 없이 메인에서 개발
4. **동기화 부족**: pull 없이 작업하다가 충돌 발생

### 해결책

```bash
# 작업 시작 전 항상 동기화
git pull origin main

# 기능별로 브랜치 생성
git checkout -b feature/new-feature

# 의미있는 커밋 메시지 작성
git commit -m "feat: Add email validation to signup form"

# 정기적으로 원격과 동기화
git fetch origin
```

---

## 주요 Git 서비스

- **GitHub**: 가장 인기있는 Git 호스팅 서비스
- **GitLab**: CI/CD 기능이 강력한 서비스
- **Bitbucket**: Atlassian 제품군과 연동

### GitHub 주요 기능

- **Pull Request**: 코드 리뷰와 토론
- **Issues**: 버그 리포트, 기능 요청
- **Actions**: CI/CD 자동화
- **Projects**: 프로젝트 관리

---

## 요약

### 필수 명령어

```bash
git init          # 저장소 초기화
git clone         # 저장소 복제
git add           # 스테이징
git commit        # 커밋
git push          # 원격에 업로드
git pull          # 원격에서 다운로드
git branch        # 브랜치 관리
git merge         # 브랜치 병합
git status        # 상태 확인
git log           # 히스토리 확인
```
