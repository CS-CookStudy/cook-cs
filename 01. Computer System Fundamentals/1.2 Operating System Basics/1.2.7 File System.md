# 📘 1.2 운영체제 기본 개념

# 1.2-7 파일 시스템

## 1. 파일과 디렉토리 구조

운영체제는 저장장치에 있는 데이터를 **파일(File)** 단위로 관리하며, 이러한 파일들을 계층 구조로 정리한 것이 **디렉토리(Directory)** 구조이다.

### 파일의 구성 요소

* 파일 이름
* 파일 위치 (디렉토리 경로)
* 크기, 생성/수정 시각
* 접근 권한 (읽기/쓰기/실행)

### 디렉토리 구조 유형

| 유형     | 설명                             | 예시              |
| ------ | ------------------------------ | --------------- |
| 단일 레벨  | 모든 파일이 하나의 디렉토리에 위치            | 간단하지만 이름 중복 불가  |
| 2단계 구조 | 사용자별 서브디렉토리 제공                 | 사용자 격리 가능       |
| 트리 구조  | 디렉토리 안에 하위 디렉토리 포함             | 대부분의 현대 OS에서 사용 |
| 그래프 구조 | 파일이 여러 디렉토리에 연결될 수 있음 (하드링크 등) | 유연하나 복잡도 증가     |

## 2. 파일 할당 방식

운영체제는 파일의 데이터를 디스크 블록에 저장할 때, 효율적인 공간 관리와 빠른 접근을 위해 다음과 같은 **할당 방식**을 사용한다.

### 2.1 연속 할당(Contiguous Allocation)

* 파일이 디스크 상에 **연속된 블록**에 저장됨
* 장점: 빠른 접근 속도 (순차 접근 유리)
* 단점: 파일 크기 변경 시 공간 재배치 필요, **외부 단편화 발생**
* 예시: 고정된 크기의 영상 파일

### 2.2 연결 할당(Linked Allocation)

* 파일 블록들이 디스크 상에서 **포인터로 연결**됨
* 장점: 파일 크기 변경이 유연, 단편화 문제 없음
* 단점: 임의 접근 속도 느림 (포인터 따라야 함)
* 예시: 로그 파일

### 2.3 인덱스 할당(Indexed Allocation)

* 별도의 **인덱스 블록**에 모든 블록의 위치 저장
* 장점: 임의 접근 가능 + 단편화 적음
* 단점: 인덱스 블록 크기 제한이 있을 수 있음
* 예시: 대부분의 현대 파일 시스템에서 사용

## 3. 저널링 파일 시스템

**저널링(Journaling) 파일 시스템**은 시스템 장애나 예기치 않은 종료가 발생했을 때 **데이터 손실을 최소화**하기 위해 변경 내용을 먼저 \*\*로그(저널)\*\*에 기록한 뒤, 실제 디스크에 반영하는 방식이다.

### 동작 흐름

1. 파일에 대한 변경 요청 발생
2. 변경 내용을 저널에 기록
3. 변경 완료 후 디스크에 적용
4. 장애 발생 시 저널 로그를 기반으로 복구 시도

### 장점

* 전원 끊김, 시스템 오류 발생 시에도 **파일 시스템 일관성 유지**
* 복구 속도 빠름 (전체 검사 대신 로그만 검사)

### 대표적 저널링 파일 시스템

* Linux: `ext3`, `ext4`, `ReiserFS`, `XFS`
* Windows: `NTFS`

## 핵심 요약

* 운영체제는 파일을 디렉토리 구조로 계층적으로 관리하며, 디스크에 할당된 블록을 통해 저장함
* 할당 방식은 연속/연결/인덱스 방식이 있으며, 각각 성능과 유연성에서 차이를 보임
* 저널링 파일 시스템은 장애 복구와 안정성 측면에서 현대 OS에서 필수적으로 채택됨

## 용어 설명

* **파일 시스템(File System)**: 데이터를 파일 단위로 저장하고 관리하는 체계
* **디렉토리(Directory)**: 파일들을 계층적으로 관리하는 구조
* **외부 단편화**: 연속 공간이 부족해 파일 저장이 어려운 현상
* **저널링(Journaling)**: 변경 사항을 로그에 먼저 기록한 뒤 적용하는 기법
* **인덱스 블록**: 파일의 데이터 블록 위치를 저장하는 테이블 형태의 구조
