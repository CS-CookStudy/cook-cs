# 모니터링과 로깅
> 모니터링 : 시스템의 상태를 실시간으로 감시하는 것
 
> 로깅 : 시스템에서 발생하는 이벤트나 오류를 기록하는 것

## 1. 모니터링과 로깅이 중요한 이유
- 모니터링은 문제가 발생하기 전에 조기 경고를 제공하여 예방할 수 있게 해줌
- 로깅은 문제가 발생한 후 원인 분석과 디버깅을 통해 문제를 해결할 수 있게 해줌

## 2. 모니터링

- 모니터링은 시스템에서 발생하는 데이터를 실시간으로 추적해서, 시스템 상태를 점검하고 이상 징후를 미리 감지할 수 있게 해주는 작업

### 2.1 모니터링 도구

- Prometheus: 시스템의 성능 지표를 수집하고, 저장하는 도구
- Grafana: Prometheus에서 수집된 데이터를 시각화하는 도구

### 2.2 모니터링의 주요 역할

1. 실시간 상태 파악
- TPS(Transactions Per Second), 응답 시간, 에러율 등의 중요한 시스템 지표를 실시간으로 확인
- 예를 들어, 웹 서버에서 응답 시간이 길어지면 지연을 감지할 수 있다

2. 자동 알림
- 시스템의 지표가 정해진 임계치를 넘으면 자동으로 알림을 받을 수 있음
- 예: CPU 사용량이 90%를 초과하면 자동으로 알림이 오고, 문제를 조기에 발견 가능

3. 성능 분석
- 특정 시간대에 트래픽이 급증하는 경우, 해당 시간대에 성능 최적화를 위해 리소스를 추가 가능
- 예: 저녁 7시에 트래픽이 몰린다면, 그 시간대에 서버 용량을 늘려서 성능을 개선할 수 있음

4. 병목 지점 파악
- 시스템에서 가장 느린 부분(병목 지점)을 찾아내고 개선할 수 있음
- 예: 데이터베이스 쿼리가 느리다면, DB 최적화를 통해 성능을 높일 수 있음

5. 사전 예방
- 디스크 용량이 급격히 증가하거나, 메모리 사용량이 높아지는 등 문제의 징후를 미리 파악해 미리 조치를 취할 수 있음
- 예: 디스크 용량 부족을 감지하고, 용량을 확장하는 등의 조치를 할 수 있음

6. 신속한 대응
- 문제가 발생했을 때 빠르게 문제를 감지하고 대응할 수 있어, 시스템 다운타임을 최소화할 수 있음
- 예: 서버가 다운되면 즉시 알림을 받고, 문제 해결에 빠르게 나설 수 있음

## 3. 로깅
- 시스템에서 발생하는 모든 중요한 이벤트를 기록하는 작업
- 예를 들어 : 로그인 시도, 주문 처리, 오류 발생 등을 로그로 기록 → 문제 발생 시, 원인 파악 추적 가능

### 3.1 로깅 도구

- Elasticsearch: 로그 데이터를 검색하고 분석하는 데 사용하는 도구
- Logstash: 로그 데이터를 수집하고 처리하는 도구
- Kibana: Elasticsearch에서 수집된 로그 데이터를 시각화하는 도구

### 3.2 로깅의 주요 역할

1. 이벤트 추적
- 시스템에서 발생하는 중요한 이벤트들을 모두 기록
- 예를 들어, 사용자가 로그인을 시도한 시점이나, 주문을 처리한 시간 등을 기록해 두면, 문제가 발생했을 때 중요한 정보를 추적할 수 있음

2. 디버깅 및 오류 해결
- 에러가 발생하면 로그를 통해 원인 분석가능
- 예를 들어, NullPointerException 같은 오류가 발생하면, 로그에서 어떤 객체가 null이었는지 확인할 수 있음
- 로그에 기록된 오류 정보를 보고 문제를 해결할 수 있음

3. 패턴 분석
- 로그 데이터를 분석하여 사용자 행동 패턴이나 시스템의 성능 패턴을 이해할 수 있음
- 예를 들어, 특정 기능이 많이 호출되는 시간대나, 주문 실패가 반복되는 시점 등을 확인할 수 있음

4. 장기적 최적화
- 로그 데이터를 장기적으로 분석하여 시스템 성능이 저하되는 원인을 찾을 수 있음
- 예를 들어, 주문 처리 속도가 느려지는 시점을 확인하고 성능 개선 작업을 할 수 있음

5. 원인 분석
- 문제가 발생한 후에 로그를 분석하여 정확한 원인을 파악할 수 있음
- 예를 들어, 사용자가 결제할 때 오류가 발생하면, 로그에서 해당 오류를 추적하여 결제 시스템의 문제를 해결할 수 있음

6. 법적 및 규제 요구 사항 준수
- 많은 산업에서는 로그 데이터를 보관하는 것이 법적 요구 사항
- 예를 들어, 금융이나 헬스케어 같은 산업에서는 사용자의 개인정보나 거래 기록을 일정 기간 동안 로그로 보관해야 할 수 있음